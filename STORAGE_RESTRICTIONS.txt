âš ï¸ RESTRICCIONES DE ALMACENAMIENTO - LECTURA OBLIGATORIA

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”´ ZONA CRÃTICA DE ALMACENAMIENTO

Las siguientes lÃ­neas y claves NO DEBEN SER MODIFICADAS NUNCA:

1. CLAVE DE ALMACENAMIENTO: "blocks"
   â”œâ”€ UbicaciÃ³n: MÃºltiples funciones en app.js
   â”œâ”€ RazÃ³n: Usada en todo el cÃ³digo para persistencia
   â””â”€ Riesgo: Si cambia, todos los datos se pierden

2. MÃ‰TODO DE ALMACENAMIENTO: localStorage.getItem/setItem
   â”œâ”€ UbicaciÃ³n: app.js
   â”œâ”€ RazÃ³n: Browser API estÃ¡ndar
   â””â”€ Riesgo: Cambiar a otra API rompe la compatibilidad

3. FORMATO: JSON serializado
   â”œâ”€ UbicaciÃ³n: JSON.stringify() / JSON.parse()
   â”œâ”€ RazÃ³n: Portabilidad entre dispositivos
   â””â”€ Riesgo: Otro formato rompe export/import

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ FUNCIONES QUE MODIFICAN ALMACENAMIENTO:

[CRÃTICA] saveCanvasHolds() - LÃ­nea ~243
â”œâ”€ localStorage.setItem("blocks", JSON.stringify(blocks));
â””â”€ NO MODIFICAR

[CRÃTICA] saveEditedBlock() - LÃ­nea ~465
â”œâ”€ localStorage.setItem("blocks",JSON.stringify(blocks));
â””â”€ NO MODIFICAR

[CRÃTICA] deleteBlock() - LÃ­nea ~480
â”œâ”€ localStorage.setItem("blocks",JSON.stringify(blocks));
â””â”€ NO MODIFICAR

[CRÃTICA] toggleFavorite() - LÃ­nea ~632
â”œâ”€ localStorage.setItem("blocks", JSON.stringify(blocks));
â””â”€ NO MODIFICAR

[CRÃTICA] importData() - LÃ­nea ~744
â”œâ”€ localStorage.setItem("blocks", JSON.stringify(mergedBlocks));
â””â”€ NO MODIFICAR

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“– ESTRUCTURA DE DATOS (INMUTABLE):

{
  name: string,           // Nombre del bloque
  grade: string,          // Dificultad: "4", "5", "5+", "6a", etc
  zone: string,           // Zona: "cueva (izquierda)", "techo", etc
  notes: string,          // Notas adicionales
  imgSrcOriginal: string, // Imagen en Base64
  holds: array,           // [{x: 0-1, y: 0-1}, ...]
  favorite: boolean       // true/false
}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… OPERACIONES SEGURAS PERMITIDAS:

âœ“ Agregar nuevos campos a los bloques (si se inicializan correctamente)
âœ“ Agregar nuevas funciones que lean/escriban con "blocks"
âœ“ Mejorar validaciÃ³n de datos antes de guardar
âœ“ Agregar mÃ¡s opciones de filtrado/bÃºsqueda
âœ“ Crear nuevos modales o vistas

âŒ OPERACIONES PROHIBIDAS:

âœ— Cambiar el nombre de la clave "blocks"
âœ— Cambiar la API de almacenamiento (localStorage â†’ otra cosa)
âœ— Cambiar el formato de serializaciÃ³n (JSON â†’ otra cosa)
âœ— Eliminar campos de la estructura sin migraciÃ³n
âœ— Modificar cÃ³mo se guardan las imÃ¡genes sin plan de backup

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ” VERIFICACIÃ“N DE INTEGRIDAD:

Antes de hacer cambios:

1. Lee DATA_STORAGE_ANALYSIS.md
2. Busca "âš ï¸ ALMACENAMIENTO CRÃTICO" en app.js
3. Si tu cambio afecta localStorage, EXPLICA POR QUÃ‰
4. MantÃ©n backwards compatibility con datos antiguos
5. Prueba en mÃºltiples dispositivos si es posible

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“± CÃ“MO FUNCIONA EN MÃšLTIPLES DISPOSITIVOS:

Dispositivo A (Usuario):
  â””â”€ localStorage["blocks"] = [bloque1, bloque2, ...]

Dispositivo B (Mismo usuario):
  â””â”€ localStorage["blocks"] = [bloque1, bloque2, ...]  (inicial)
  â””â”€ Importa archivo â†’ localStorage["blocks"] = [...merged...]

Esta separaciÃ³n es INTENCIONAL y NECESARIA.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â“ PREGUNTAS FRECUENTES:

P: Â¿Puedo cambiar localStorage a sessionStorage?
R: NO. PerderÃ­as datos cuando cierres la pestaÃ±a.

P: Â¿Puedo cambiar la clave a "data" o "app-data"?
R: NO. RomperÃ­as todos los dispositivos existentes.

P: Â¿Puedo guardar en un servidor externo?
R: Posiblemente, PERO necesitarÃ­as migraciÃ³n de datos.
   Consulta con el equipo antes.

P: Â¿QuÃ© pasa si localStorage se llena?
R: Las imÃ¡genes Base64 pueden ocupar ~2-5MB cada una.
   MÃ¡ximo ~10MB por dominio en la mayorÃ­a de navegadores.
   Limita bloques a ~50-100 con imÃ¡genes medianas.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Documento creado: 9 de enero de 2026
RestricciÃ³n nivel: MÃXIMO
Requiere autorizaciÃ³n para cambios: SÃ
